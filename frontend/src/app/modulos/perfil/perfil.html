<app-navbar></app-navbar>

<div class="perfil-container">
  <div class="perfil-wrapper">

    <!-- Tarjeta de info del usuario -->
    <div class="card info-card">
      <div class="avatar-grande">
        {{ nombreUsuario.substring(0, 2).toUpperCase() }}
      </div>
      <div class="user-data">
        <h2>{{ nombreUsuario }}</h2>
        <span class="badge-rol">{{ rolUsuario | uppercase }}</span>
      </div>
    </div>

    <!-- Tarjeta cambio de contraseÃ±a -->
    <div class="card clave-card">
      <div class="card-title">
        <span>ğŸ”’</span>
        <h3>Cambiar contraseÃ±a</h3>
      </div>

      <div *ngIf="error" class="alert alert-error">{{ error }}</div>
      <div *ngIf="exito" class="alert alert-success">{{ exito }}</div>

      <!-- Clave actual -->
      <div class="form-group">
        <label>ContraseÃ±a actual</label>
        <div class="input-wrapper">
          <input
            [type]="showClaveActual ? 'text' : 'password'"
            [(ngModel)]="claveActual"
            placeholder="Tu contraseÃ±a actual"
            autocomplete="current-password"
          />
          <button type="button" class="toggle-eye" (click)="toggleClaveActual()">
            {{ showClaveActual ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
      </div>

      <!-- Nueva clave -->
      <div class="form-group">
        <label>Nueva contraseÃ±a</label>
        <div class="input-wrapper">
          <input
            [type]="showClaveNueva ? 'text' : 'password'"
            [(ngModel)]="claveNueva"
            placeholder="MÃ­nimo 8 caracteres"
            autocomplete="new-password"
          />
          <button type="button" class="toggle-eye" (click)="toggleClaveNueva()">
            {{ showClaveNueva ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
      </div>

      <!-- Confirmar nueva clave -->
      <div class="form-group">
        <label>Confirmar nueva contraseÃ±a</label>
        <div class="input-wrapper">
          <input
            [type]="showClaveConfirm ? 'text' : 'password'"
            [(ngModel)]="claveNuevaConfirmacion"
            placeholder="Repite la nueva contraseÃ±a"
            autocomplete="new-password"
          />
          <button type="button" class="toggle-eye" (click)="toggleClaveConfirm()">
            {{ showClaveConfirm ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
          </button>
        </div>
      </div>

      <button
        class="btn-submit"
        (click)="onSubmit()"
        [disabled]="isLoading">
        {{ isLoading ? 'Guardando...' : 'Actualizar contraseÃ±a' }}
      </button>
    </div>

  </div>
</div>
